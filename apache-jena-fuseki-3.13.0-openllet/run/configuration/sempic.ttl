@prefix :      <#> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix ja:    <http://jena.hpl.hp.com/2005/11/Assembler#> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix fuseki: <http://jena.apache.org/fuseki#> .
@prefix tdb2:    <http://jena.apache.org/2016/tdb#>.
@prefix text:    <http://jena.apache.org/text#> .

:service_sempic_all  a                   fuseki:Service ;
        rdfs:label                    "Sempic data + ontology with reasoner" ;
        fuseki:dataset                :text_dataset; #:infdataset ;
        fuseki:name                   "sempic" ;
        fuseki:serviceQuery           "query" , "sparql" ;
        fuseki:serviceReadGraphStore  "get" ;
        fuseki:serviceReadWriteGraphStore
                "data" ;
        fuseki:serviceUpdate          "update" ;
        fuseki:serviceUpload          "upload" .


:service_sempic_onto  a                   fuseki:Service ;
        rdfs:label                    "Sempic ontology (only asserted data)" ;
        fuseki:dataset                :ontodataset ;
        fuseki:name                   "sempic-onto" ;
        fuseki:serviceQuery           "query" , "sparql" ;
        fuseki:serviceReadGraphStore  "get" ;
        fuseki:serviceReadWriteGraphStore
                "data" ;
        fuseki:serviceUpdate          "update" ;
        fuseki:serviceUpload          "upload" .

:service_sempic_data  a                   fuseki:Service ;
        rdfs:label                    "Sempic data (only asserted data)" ;
        fuseki:dataset                :datadataset;
        fuseki:name                   "sempic-data" ;
        fuseki:serviceQuery           "query" , "sparql" ;
        fuseki:serviceReadGraphStore  "get" ;
        fuseki:serviceReadWriteGraphStore
                "data" ;
        fuseki:serviceUpdate          "update" ;
        fuseki:serviceUpload          "upload" .

:infdataset a			ja:RDFDataset;
	ja:defaultGraph		:infmodel.

:ontodataset a			ja:RDFDataset;
	ja:defaultGraph		:sempiconto.

:datadataset a			ja:RDFDataset;
	ja:defaultGraph		:sempicdata.

	
:infmodel a 			ja:InfModel;
	ja:baseModel		:unionmodel;
        # ja:reasoner  		[ ja:reasonerURL <http://jena.hpl.hp.com/2003/OWLFBRuleReasoner>].
	ja:reasoner [ ja:reasonerClass "openllet.jena.PelletReasonerFactory"].

:unionmodel
	a		ja:UnionModel;
	ja:rootModel	:sempicdata;
	ja:subModel	:sempiconto .


:sempicdata a tdb2:GraphTDB2 ;
	tdb2:location "./run/databases/sempic-data" .

:sempiconto
	a ja:MemoryModel ;
ja:content [
		ja:externalContent "../SempicRDF/src/main/resources/sempiconto.owl"
	].

# A TextDataset is a regular dataset with a text index.
:text_dataset rdf:type     text:TextDataset ;
    text:dataset   :infdataset ;
    text:index     <#indexLucene> .

<#indexLucene> a text:TextIndexLucene ;
    text:directory <file:../databases/sempic-text> ;  # <-- replace `<file:path>` with your path (e.g., `<file:/.../fuseki/run/databases/MY_INDEX>`)
    text:entityMap <#entMap> ;
    text:storeValues true ; 
    text:analyzer [ a text:StandardAnalyzer ] ;
    text:queryAnalyzer [ a text:KeywordAnalyzer ] ;
    text:queryParser text:AnalyzingQueryParser ;
   # text:propLists ( [ . . . ] . . . ) ;
   # text:defineAnalyzers ( [ . . . ] . . . ) ;
    text:multilingualSupport true . # optional

# Entity map (see documentation for other options)
<#entMap> a text:EntityMap ;
    text:defaultField     "label" ;
    text:entityField      "uri" ;
    text:uidField         "uid" ;
    text:langField        "lang" ;
    text:graphField       "graph" ;
    text:map (
        [ text:field "label" ; 
          text:predicate rdfs:label ] 
    ) .
